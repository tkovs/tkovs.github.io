<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Programação Funcional</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">        
        <meta name="description" content="Apenas um blog sobre mim, música, programação, as pessoas e o que mais me der na telha, flw.
">
        <link rel="canonical" 
        href="http://tkovs.github.io/blog/programacao-funcional">
        
        <!-- Harmony styles -->
        <link rel="stylesheet" type="text/css" href="/assets/css/main.css">

        <!-- Modernizr js -->
        <script async src="/assets/js/modernizr.js"></script>    

        <!-- IE Fixes -->
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->        
    </head>
    <body class="theme-base-01">
        <header class="main-header">
            <div class="wc-container">
                <h1><a href="/">tkovs</a></h1>
                <h2>Um blog sobre mim e o que mais eu achar interessante</h2>
                <ul>
	<li>
		<a href="http://tkovs.github.io/about">Sobre</a><span>/</span>
	</li>
	<li>
		<a href="http://tkovs.github.io/blog">Blog</a><span>/</span>
	</li>
	<li>
		<a href="http://tkovs.github.io/resume">Currículo</a><span>/</span>
	</li>
</ul>
                
            </div>
        </header>
        <div class="page-content wc-container">
	
	<div class="post">
		<h1>Programação Funcional</h1>
		<p class="post-meta">
			
      <span class="categories">
      programação funcional
      </span> |
	    
	    <span class="post-date">
    	Mar 31, 2016 
	    </span>
		</p>		
		<div class="post">
			<p><em>Esse artigo é recomendado para quem já tem experiência com programação</em></p>

<p>Primeiramente, devo lembra-lo que um paradigma de programaçao é o modo que construímos um programa,
se tratando da sua estrutura, da forma como se escreve e como seu fluxo de funcionamento é descrito.
É um conceito teórico que embasa, posteriormente, o funcionamento de uma linguagem de programação.
O paradigma tratado nesse texto é baseado no cálculo de funções, diferente do paradigma imperativo na troca de 
estados durante a execução de um programa, e do paradigma Orientado a Objetos que se baseia na 
troca de mensagens entre objetos - dei esses dois exemplos pois são os paradigmas mais comuns.
O paradigma funcional é, naturalmente, um paradigma declarativo, pois os programas se focam mais no
que deve ser feito do que nos passos para o fazer.</p>

<h3 id="haskell">Haskell</h3>

<p>A linguagem escolhida para demonstração de exemplos foi Haskell, uma linguagem puramente funcional e
muito reconhecida academicamente. Em breve escrevo uma postagem sobre ela apenas com as informações
necessárias para o entendimento dessa introdução à programação funcional. Caso queira estudar
Haskell por conta própria, recomendo os seguintes materiais:</p>

<ul>
  <li><a href="http://www.cs.nott.ac.uk/~pszgmh/book.html"><strong>Programming in Haskell</strong> <em>by Graham Hutton</em></a></li>
  <li><a href="https://wiki.haskell.org/"><strong>Wiki Haskell</strong></a></li>
</ul>

<h3 id="conceitos">Conceitos</h3>

<p>Para compreender esse paradigma, alguns conceitos são fundamentais.</p>

<p><strong>Funções puras</strong>: São funções sem side-effects - ou efeitos colaterais, em português. Elas não
dependem de nada além daquilo que é passado a elas como argumento e não influenciam diretamente o
resto do programa. Isso vai ao encontro da computação paralela, que é a divisão de uma tarefa entre
vários processadores, ou até mesmo máquinas. Um exemplo é você ter uma lista de dados e precisar aplicar
uma função sobre todos os dados: pode-se dividir essa lista em listas menores e, tendo vários
processadores a disposição, atribuir uma lista a cada um e fazê-los trabalharem paralelamente,
otimizando a tarefa. Outro conceito que contribui para paralelização é a imutabilidade.</p>

<p><strong>Imutabilidade</strong>: Ao se definir o valor de um dado, ele não pode ter seu valor alterado. Ao invés
de se alterar o valor existe, cria-se uma cópia para se trabalhar, um dado novo, baseado no velho.
Ao manipular dados, você não precisa se preocupar em alterar dados, pois novos sempre são criados
quando você precisa fazer isso.</p>

<p>No exemplo abaixo, imagine que nesse programa escrito em C a variável <code>tamanho</code> já tenha sido
declarada e contenha o tamanho do <code>vetor</code>, e <code>soma</code> já tenha sido declarada anteriormente também. Se o
conteúdo de <code>vetor[indice]</code> for alterado antes da soma terminar, o resultado será incorreto.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">soma</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">indice</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">indice</span> <span class="o">&lt;</span> <span class="n">tamanho</span><span class="p">;</span> <span class="n">indice</span><span class="o">++</span><span class="p">)</span>
    <span class="n">soma</span> <span class="o">+=</span> <span class="n">vetor</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>
<span class="p">}</span>

<span class="n">Outro</span> <span class="n">exemplo</span> <span class="k">do</span> <span class="n">uso</span> <span class="n">de</span> <span class="n">programa</span><span class="err">çã</span><span class="n">o</span> <span class="n">paralela</span> <span class="err">é</span> <span class="n">na</span> <span class="n">renderiza</span><span class="err">çã</span><span class="n">o</span> <span class="n">de</span> <span class="n">imagens</span><span class="p">.</span> <span class="n">H</span><span class="err">á</span> <span class="n">milh</span><span class="err">õ</span><span class="n">es</span> <span class="n">de</span> <span class="n">pixels</span> <span class="n">que</span>
<span class="n">devem</span> <span class="n">ser</span> <span class="n">renderizados</span><span class="p">.</span> <span class="n">Todos</span> <span class="n">eles</span> <span class="n">podem</span> <span class="n">ser</span> <span class="n">renderizados</span> <span class="n">individualmente</span><span class="p">,</span> <span class="n">sem</span> <span class="n">depender</span> <span class="n">um</span> <span class="k">do</span> <span class="n">outro</span><span class="p">.</span>
<span class="n">A</span> <span class="n">ideia</span> <span class="err">é</span> <span class="n">mais</span> <span class="n">ou</span> <span class="n">menos</span> <span class="n">essa</span><span class="p">.</span> <span class="n">Logo</span><span class="p">,</span> <span class="n">dividir</span> <span class="n">a</span> <span class="n">tarefa</span> <span class="n">agiliza</span> <span class="n">demais</span> <span class="n">o</span> <span class="n">processo</span><span class="p">.</span>

<span class="n">printf</span> <span class="p">(</span><span class="s">&quot;%d&quot;</span><span class="p">,</span> <span class="n">soma</span><span class="p">);</span></code></pre></figure>

<p><strong>Recursão</strong>: O único meio de iteração ao se programar de um jeito puramente funcional é usando recursão.
Recursão, na computação, é como definimos o comportamento de uma função que invoca a si mesma.
Devido ao paralelismo, o resultado é otimizado, porém como recursão está em constante uso, as vezes
acaba pesando, mesmo com os recursos de otimização, por isso há outros meios que contribuem para 
isso, como por exemplo usar recursão de cauda.
Mas antes de entrar nesse assunto será demonstrado aqui o uso da recursão para funções comuns.</p>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="c1">-- Soma de uma lista</span>
<span class="nf">sum</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Num</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Num</span>
<span class="nf">sum</span> <span class="kt">[]</span> <span class="ow">=</span> <span class="mi">0</span>
<span class="nf">sum</span> <span class="p">(</span><span class="n">x</span><span class="kt">:</span><span class="n">xs</span><span class="p">)</span> <span class="ow">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">sum</span> <span class="n">xs</span>

<span class="c1">-- sum [1,2,3,4,5]</span>
<span class="c1">-- 15</span>

<span class="c1">-- Fatorial de um número</span>
<span class="nf">fat</span> <span class="ow">::</span> <span class="kt">Int</span> <span class="ow">-&gt;</span> <span class="kt">Int</span>
<span class="nf">fat</span> <span class="mi">1</span> <span class="ow">=</span> <span class="mi">1</span>
<span class="nf">fat</span> <span class="n">x</span> <span class="ow">=</span> <span class="n">x</span> <span class="o">*</span> <span class="n">fat</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="c1">-- fat 5 </span>
<span class="c1">-- 120</span></code></pre></figure>

<p>Recursão de cauda, ou <strong>tail call</strong> em inglês, é como uma subcategoria da recursão, e é usada pois
na recursão comum o número de chamadas à função aumenta, dessa forma a pilha acaba estourando.
Explicando isso de uma maneira simples, uma função com recursão de cauda é uma função onde a chamada
a si mesma ocorre apenas no final da função, pois a cauda de uma função é sua última ação, seu
último cálculo, dessa forma não é preciso manter na pilha de chamada os valores de retorno. É
verdade que funções recursivas podem ser mais custosas do que iterações, mas normalmente os
compiladores de linguagens funcionais transformam chamadas a funções com recursão em cauda em laços,
o que dá a eficiência de um loop, o código provavelmente ficará mais legível, e as chamadas à função
podem ser divididas entre processadores/máquinas.</p>

<blockquote>
  <p>O código abaixo mostra a escrita e o funcionamento da função fibonacci sem usar tail call.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="lineno"> 1</span> <span class="c1">-- Fibonacci sem tail call</span>
<span class="lineno"> 2</span> <span class="nf">fib</span> <span class="ow">::</span> <span class="kt">Int</span> <span class="ow">-&gt;</span> <span class="kt">Int</span>
<span class="lineno"> 3</span> <span class="nf">fib</span> <span class="mi">0</span> <span class="ow">=</span> <span class="mi">0</span>
<span class="lineno"> 4</span> <span class="nf">fib</span> <span class="mi">1</span> <span class="ow">=</span> <span class="mi">1</span>
<span class="lineno"> 5</span> <span class="nf">fib</span> <span class="n">x</span> <span class="ow">=</span> <span class="n">fib</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> <span class="cm">{-</span>
<span class="lineno"> 8</span> <span class="cm">-&gt; Execução do código acima para x = 6</span>
<span class="lineno"> 9</span> <span class="cm">-&gt; fib 6</span>
<span class="lineno">10</span> <span class="cm">-&gt; (fib 5) + (fib 4)</span>
<span class="lineno">11</span> <span class="cm">-&gt; ((fib 4) + (fib 3)) + ((fib 3) + (fib 2))</span>
<span class="lineno">12</span> <span class="cm">-&gt; (((fib 3) + (fib 2)) + ((fib 2) + (fib 1))) + (((fib 2) + (fib 1)) + ((fib 1) + (fib 0)))</span>
<span class="lineno">13</span> <span class="cm">-&gt; ((((fib 2) + (fib 1)) + ((fib 1) + (fib 0))) + (((fib 1) + (fib 0)) + 1)) + ((((fib 1) + (fib 0)) + 1) + (1 + 0))</span>
<span class="lineno">14</span> <span class="cm">-&gt; (((((fib 1) + (fib 0)) + 1) + (1 + 0)) + ((1 + 0) + 1)) + (((1 + 0) + 1) + (1 + 0))</span>
<span class="lineno">15</span> <span class="cm">-&gt; ((((1 + 0) + 1) + 1) + (1 + 1)) + ((1 + 1) + 1)</span>
<span class="lineno">16</span> <span class="cm">-&gt; (((1 + 1) + 1) + 2) + (2 + 1)</span>
<span class="lineno">17</span> <span class="cm">-&gt; ((2 + 1) + 2) + 3</span>
<span class="lineno">18</span> <span class="cm">-&gt; (3 + 2) + 3</span>
<span class="lineno">19</span> <span class="cm">-&gt; 5 + 3</span>
<span class="lineno">20</span> <span class="cm">-&gt; 8</span>
<span class="lineno">21</span> <span class="cm">-}</span></code></pre></figure>

<blockquote>
  <p>O código abaixo mostra a escrita e o funcionamento da função fibonacci usando tail call e uma função
auxiliar.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-haskell" data-lang="haskell"><span class="c1">-- Fibonacci com tail call</span>
<span class="nf">fib</span> <span class="ow">::</span> <span class="kt">Int</span> <span class="ow">-&gt;</span> <span class="kt">Int</span>
<span class="nf">fib</span> <span class="n">x</span> <span class="ow">=</span> <span class="n">fib_aux</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="nf">fib_aux</span> <span class="ow">::</span> <span class="p">(</span><span class="kt">Int</span><span class="p">,</span> <span class="kt">Int</span><span class="p">,</span> <span class="kt">Int</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="kt">Int</span>
<span class="nf">fib_aux</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">current</span><span class="p">,</span> <span class="kr">_</span><span class="p">)</span>    <span class="ow">=</span> <span class="n">current</span>
<span class="nf">fib_aux</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">current</span><span class="p">,</span> <span class="n">next</span><span class="p">)</span> <span class="ow">=</span> <span class="n">fib_aux</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">next</span><span class="p">,</span> <span class="n">current</span> <span class="o">+</span> <span class="n">next</span><span class="p">)</span>

<span class="cm">{-</span>
<span class="cm">-&gt; Execução do código acima para x = 6</span>
<span class="cm">-&gt; fib 6</span>
<span class="cm">-&gt; fib_aux(6, 0, 1)</span>
<span class="cm">-&gt; fib_aux(5, 1, 1)</span>
<span class="cm">-&gt; fib_aux(4, 1, 2)</span>
<span class="cm">-&gt; fib_aux(3, 2, 3)</span>
<span class="cm">-&gt; fib_aux(2, 3, 5)</span>
<span class="cm">-&gt; fib_aux(1, 5, 8)</span>
<span class="cm">-&gt; fib_aux(0, 8, 13)</span>
<span class="cm">-&gt; 8</span>
<span class="cm">-}</span></code></pre></figure>

<p><strong>Transparência referencial</strong>: Não importa quantas vezes uma função seja chamada, se o parâmetro for
o mesmo o retorno também será, e a essa propriedade se dá o nome de transparência referencial.
Dessa forma, facilmente se prova que uma função está funcionando como
deveria, e consequentemente, constroe-se funções mais complexas e seguras. Isso parece óbvio, mas em
outros paradigmas, é comum a mesma expressão poder resultar em diferentes valores em diferentes
momentos dependendo do estado de execução do programa. Como a <a href="https://wiki.haskell.org">wiki do
Haskell</a> mostra, se <code>y = f x</code> e <code>g = h y y</code>, poderia substituir y por f x
de modo que g fosse descrito por <code>g = h (f x) (f x)</code> e se obter o mesmo resultado.</p>

		</div>
	</div>


	
	<div class="related">
		<h4>Related Posts</h2>
		<ul class="posts">
		    
		    <li>
			  <span>31 Mar 2016 &raquo;</span>
			  <a href="http://tkovs.github.io/blog/introducao-linguagem-c">Introdução básica à linguagem C</a>
		    </li>
		    
		</ul>
	</div>
	

	<div class="post-footer">
		<div class="column-1">
			
				<a href="http://tkovs.github.io/blog/introducao-linguagem-c"><< Older</a>
			
		</div>
		<div class="column-2"><a href="http://tkovs.github.io/ ">Home</a></div>
		<div class="column-3">
			
				<span>Newer >></span>
			
		</div>
	</div>
</div>
 

        <footer class="main-footer">
            <div class="wc-container">
                <div class="column one">
                    <h6>Few more links</h6>
<ul class="menu">
    <li><a href="http://tkovs.github.io/about">About</a></li>
    <li><a href="http://tkovs.github.io/blog">Blog</a></li>
</ul>		
                    
                </div>
                <div class="column two">
                    <h6>Follow me</h6>

<ul class="social-media">


    
    <li>
        <a title="_tvovs on Twitter" 
            href="https://twitter.com/_tvovs" 
            class="twitter wc-img-replace" target="_blank">Twitter</a>
    </li>   
    

    
    <li>
        <a title="tkovs on Github" 
            href="https://github.com/tkovs" 
            class="github wc-img-replace" target="_blank">Github</a>
    </li>
     

    
    <li>
        <a title="joaovitorIFAL on Facebook" 
            href="https://facebook.com/joaovitorIFAL" 
            class="facebook wc-img-replace" target="_blank">Facebook</a>
    </li>
    

    

    

    

</ul>
                </div>
            </div>
            <p class="wc-container disclaimer">
                
	Made by <a href="http://gayan.me" target="_blank">Gayan Virajith</a> For everyone.      

Powered by <a href="http://jekyllrb.com" target="_blank">Jekyll</a>
            </p>
        </footer>
        <script type="text/javascript">
          /* To avoid render blocking css */
          var cb = function() {
            var l = document.createElement('link'); l.rel = 'stylesheet';
            l.href = 'http://fonts.googleapis.com/css?family=Ubuntu+Mono&subset=latin';
            var h = document.getElementsByTagName('head')[0]; h.parentNode.insertBefore(l, h);
          };
          var raf = requestAnimationFrame || mozRequestAnimationFrame ||
              webkitRequestAnimationFrame || msRequestAnimationFrame;
          if (raf) raf(cb);
          else window.addEventListener('load', cb);
        </script>
        <!-- jQuery -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- When no internet load JQuery from local -->
        <script>window.jQuery || document.write('<script src="/assets/js/jquery.min.js"><\/script>')</script>
        <!-- Site js -->
        <script src="/assets/js/all.js"></script>
        <!-- Google analytics  -->
        
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxx-x']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

    </body>        
</html>
